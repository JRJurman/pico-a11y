pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
-- a11y-template main
-- see second page for functions
-- see the github page for full documentation

function _init()
  set_sr_text("simple example for pico a11y template, counter at 0, press x to increment, o to reset, or direction buttons. check out the github page for all the documentation and details.")
  
  -- simple counter example, because that is easy
  counter = 0
end

function _update()
  if (btnp(❎)) counter = counter + 1
  if (btnp(⬅️)) counter = counter - 5
  if (btnp(➡️)) counter = counter + 5
  if (btnp(⬆️)) counter = counter + 1
  if (btnp(⬇️)) counter = counter - 1

  if (btn(❎) or btn(⬅️) or btn(➡️) or btn(⬆️) or btn(⬇️)) then
    set_sr_text("" .. counter)
  end

	 if (btnp(🅾️)) then 
	   counter = 0
	   set_sr_text("counter reset")
  end
		
		
  update_sr()
  handle_pause_sr()
end

function _draw()
  cls()
  map()
  
  print("counter ".. counter, 50, 20)
end
-->8
-- pico-8 a11y template

-- this file contains functions
-- to interface with a webpage
-- and present text for screen
-- readers.
-- read more at https://github.com/jrjurman/pico-a11y-template

-- gpio addresses
a11y_start = 0x5f80
a11y_page_size = 128 - 4
a11y_end  = a11y_start + a11y_page_size
-- has the window read the page? 0 or 1
a11y_read = a11y_end + 1
-- what page are we on?
a11y_page = a11y_end + 2
-- what is the last page?
a11y_last = a11y_end + 3

-- full text to read out
a11y_text = ""

-- update screen reader function
-- this should be called at the
-- end of your update function
function update_sr()
  -- get current page
  local has_read_page = peek(a11y_read) == 1
  local page = peek(a11y_page)
  local last_page = peek(a11y_last)

  -- if we have read this page (and there are more)
  -- reset the read counter, and update the page
  if (has_read_page and page < last_page) then
    page = page + 1
    poke(a11y_read, 0)
    poke(a11y_page, page)
  end
  
  if (page <= last_page) then
   -- clear previous text
   for i = a11y_start,a11y_end do
     poke(i, 0)
   end
   
	  -- load the text for this page
	  local text_start = a11y_page_size * page
	  local text_end = a11y_page_size * (page + 1)
	  for i = 1, a11y_page_size do
	    local char = ord(a11y_text, i + text_start)
	    local addr = a11y_start + i
	    poke(addr, char)
	  end
  end
end

function set_sr_text(text)
  -- set text and page variables
  a11y_text = text
  local page_size = (#text/a11y_page_size)

  -- reset counters and set values
  poke(a11y_read, 0)
  poke(a11y_page, 0)
  poke(a11y_last, page_size)

		-- run update_sr to populate the text
  update_sr()
end

-- handle pause button
-- since this menu is not accessible
pre_paused_text = ""
function handle_pause_sr()
  -- first, check if we have pre_paused_text
  -- this is the text before pausing
  -- this will also be true right after pause menu is closed
  if (pre_paused_text != "") then
    set_sr_text(pre_paused_text)
    pre_paused_text = ""
  end
  
  -- then, if we just paused, update the menu text
  -- and save the existing a11y text (to load later)
  if (btn(6)) then
    pre_paused_text = a11y_text
    set_sr_text("you've entered the pause menu, read out is not available yet, press p or enter to leave")
  end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888eeeeee888888888888888888888888888888888888888888888888888888888888888888888888ff8ff8888228822888222822888888822888888228888
8888ee888ee88888888888888888888888888888888888888888888888888888888888888888888888ff888ff888222222888222822888882282888888222888
888eee8e8ee88888e88888888888888888888888888888888888888888888888888888888888888888ff888ff888282282888222888888228882888888288888
888eee8e8ee8888eee8888888888888888888888888888888888888888888888888888888888888888ff888ff888222222888888222888228882888822288888
888eee8e8ee88888e88888888888888888888888888888888888888888888888888888888888888888ff888ff888822228888228222888882282888222288888
888eee888ee888888888888888888888888888888888888888888888888888888888888888888888888ff8ff8888828828888228222888888822888222888888
888eeeeeeee888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1eee1e1e1ee111ee1eee1eee11ee1ee1111116661666166616661171166616661616166611711111111111111111111111111111111111111111111111111111
1e111e1e1e1e1e1111e111e11e1e1e1e111116161616116116161711116116111616116111171111111111111111111111111111111111111111111111111111
1ee11e1e1e1e1e1111e111e11e1e1e1e111116661661116116661711116116611161116111171111111111111111111111111111111111111111111111111111
1e111e1e1e1e1e1111e111e11e1e1e1e111116161616116116161711116116111616116111171111111111111111111111111111111111111111111111111111
1e1111ee1e1e11ee11e11eee1ee11e1e111116161616166616161171116116661616116111711111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111e1111ee11ee1eee1e11111111661666166616661666111116661661166116661111111111111ccc1c1c1ccc1ccc1ccc1ccc11111111111111111111
111111111e111e1e1e111e1e1e11111116111161161616161161111116161616161616161111177711111c1c1c1c1c111c111c1c1c1c11111111111111111111
111111111e111e1e1e111eee1e11111116661161166616611161111116661616161616611111111111111c1c11c11ccc1cc11ccc1c1c11111111111111111111
111111111e111e1e1e111e1e1e11111111161161161616161161111116161616161616161111177711111c1c1c1c111c1c111c1c1c1c11111111111111111111
111111111eee1ee111ee1e1e1eee111116611161161616161161166616161666166616161111111111111ccc1c1c1ccc1c111ccc1ccc11111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111eee11ee1eee111116661111111111111ccc111111111717166616661616166611111ee111ee11111111111111111111111111111111111111111111
111111111e111e1e1e1e111111611111177711111c1c111111111777116116111616116111111e1e1e1e11111111111111111111111111111111111111111111
111111111ee11e1e1ee1111111611111111111111c1c111111111717116116611161116111111e1e1e1e11111111111111111111111111111111111111111111
111111111e111e1e1e1e111111611111177711111c1c117111111777116116111616116111111e1e1e1e11111111111111111111111111111111111111111111
111111111e111ee11e1e111116661111111111111ccc171111111717116116661616116111111eee1ee111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111188888111111111111111
11111111111111111e1111ee11ee1eee1e111111116616161666166611111111111111bb1b1b1bbb117116661666161616661111111186668111111116661171
11111111111111111e111e1e1e111e1e1e11111116111616161616161111177711111b111b1b1b1b171111611611161611611111111188688111111111611117
11111111111111111e111e1e1e111eee1e11111116111666166616611111111111111bbb1b1b1bb1171111611661116111611111111188688111111111611117
11111111111111111e111e1e1e111e1e1e1111111611161616161616111117771111111b1b1b1b1b171111611611161611611171111188688171111111611117
11111111111111111eee1ee111ee1e1e1eee111111661616161616161111111111111bb111bb1bbb117111611666161611611711111186668711111116661171
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111e1111ee11ee1eee1e1111111666166116611666111111111111116616661666166616661111166616611661166611111111111116661111
11111111111111111e111e1e1e111e1e1e1111111616161616161616111117771111161111611616161611611111161616161616161611111171111111611111
11111111111111111e111e1e1e111eee1e1111111666161616161661111111111111166611611666166111611111166616161616166111111777111111611111
11111111111111111e111e1e1e111e1e1e1111111616161616161616111117771111111611611616161611611111161616161616161611111171111111611111
11111111111111111eee1ee111ee1e1e1eee11111616166616661616111111111111166111611616161611611666161616661666161611111111111116661111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111bbb11bb1b1b1bbb117116661661166116661111111111661616166616661171111111111111111111111111111111111111111111111111
11111111111111111b1b1b1b1b1b1b11171116161616161616161111111116111616161616161117111111111111111111111111111111111111111111111111
11111111111111111bbb1b1b1bb11bb1171116661616161616611111111116111666166616611117111111111111111111111111111111111111111111111111
11111111111111111b111b1b1b1b1b11171116161616161616161171111116111616161616161117111111111111111111111111111111111111111111111111
11111111111111111b111bb11b1b1bbb117116161666166616161711111111661616161616161171111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111eee1ee11ee1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111e111e1e1e1e111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111ee11e1e1e1e111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111e111e1e1e1e111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111eee1e1e1eee111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1eee1ee11ee111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1e111e1e1e1e11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1ee11e1e1e1e11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1e111e1e1e1e11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1eee1e1e1eee11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111711111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111771111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111777111111111111111111111111111111111111111111111111111111111111111
166616661666166611711c1c1c1c1ccc1c111c1111cc11111c1c11cc1ccc11777711111111cc1cc11c1c11711111111111111111111111111111111111111111
161616161161161617111c1c1c1c1c111c111c111c1c11111c1c1c1c1c1c1177111c111111ccccc11c1c11171111111111111111111111111111111111111111
1666166111611666171111111ccc1cc11c111c111c1c11111c1c1c1c1cc11c11711c111111ccccc1111111171111111111111111111111111111111111111111
1616161611611616171111111c1c1c111c111c111c1c11111ccc1c1c1c1c1c111c1c1111111ccc11111111171111111111111111111111111111111111111111
1616161616661616117111111c1c1ccc1ccc1ccc1cc111111ccc1cc11c1c1ccc1ccc11111111c111111111711111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
82888222822882228888828288828228822288888888888888888888888888888888888888888888888888888888822282228882822282288222822288866688
82888828828282888888828288288828828288888888888888888888888888888888888888888888888888888888888288828828828288288282888288888888
82888828828282288888822288288828828288888888888888888888888888888888888888888888888888888888882288228828822288288222822288822288
82888828828282888888888288288828828288888888888888888888888888888888888888888888888888888888888288828828828288288882828888888888
82228222828282228888888282888222822288888888888888888888888888888888888888888888888888888888822282228288822282228882822288822288
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888

